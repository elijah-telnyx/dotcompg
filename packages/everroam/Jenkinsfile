@Library("github.com/team-telnyx/infra-ci-pipelines@latest") _
dockerImage {
  build_dir = "packages/everroam"
  build_on_changes_to_these_path_prefixes = [
    ".nvmrc",
    "package.json",
    "package-lock.json",
    "packages/ui",
    "packages/theme",
    "packages/everroam"
  ]
  build_stage_targets = [ "build", "build-prod"]
  image_additional_images = ["prod"]
  service = "everroam-oci"
  channel = "#dotcom-jenkins"
  vault_secrets = [
    [
      path: "dotcom-squad/everroam",
      secretValues: [
        [vaultKey: "CONTENTFUL_ACCESS_TOKEN"],
        [vaultKey: "CONTENTFUL_ACCESS_TOKEN_PREVIEW"],
        [vaultKey: "GOOGLE_SERVICE_ACCOUNT_EMAIL"],
        [vaultKey: "GOOGLE_PRIVATE_KEY"],
      ]
    ]
  ]
}
